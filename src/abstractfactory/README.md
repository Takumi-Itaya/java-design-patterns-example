# Abstract Factory パターン

## アブストラクトファクトリパターンとは

Abstract Factory パターンは、関連する一連のオブジェクトを一貫性を持って生成するためのデザインパターンです。このパターンでは、具体的なクラスを指定することなく、関連するオブジェクトのファミリーを作成するためのインターフェースを提供します。

## 目的

- 関連するオブジェクトのファミリーを一貫性を持って生成する
- クライアントコードを具体的なクラスから分離する
- システムの設定や環境に応じて、異なるオブジェクトファミリーを切り替える

## メリット・デメリット

**メリット**

- 異なる製品の組み合わせを統一でき、常に一貫性を持って生成されるので、誤った組み合わせを防げる
- 具体的なクラスを意識せずにオブジェクトを作成できるので、依存関係が分離される
- オブジェクトの生成ロジックが一か所に集中し、変更の影響範囲が限定的なので保守性が高い

**デメリット**

- クラス数が増えたり、パターンの実装が複雑になる
- 新しい製品を追加する場合、すべての Factory に影響が出る

## 主なユースケース

1. **GUI ライブラリ (Swing, JavaFX, Android)**

   - 異なる OS に対応する UI を切り替える。
   - 一貫性のあるデザインの保証

2. **データベースのドライバ選択 (JDBC)**

   - DB の種類 (MySQL, PostgreSQL) に応じて適切な接続を作成
   - データベース固有のオブジェクトの生成

3. **ドキュメント生成**

   - 異なるフォーマット（PDF, Word, HTML 等）のドキュメント生成
   - フォーマット固有のコンポーネントの生成

4. **ゲーム開発 (ゲームオブジェクトの生成)**

   - 異なるテーマ (Sci-Fi, Fantasy) に応じたキャラクターや UI を切り替え

5. **クラウドプロバイダー (AWS, GCP, Azure)**

   - 各クラウドに応じたストレージ (S3, Blob Storage) を作成

6. **プラグインシステム**
   - 新しいプラグインを追加しても、既存コードに影響を与えない

## 実装例の説明

このプロジェクトでは、GUI コンポーネントの生成を例として実装しています：

1. **抽象製品**

   - `Button`: ボタンの抽象クラス
   - `Checkbox`: チェックボックスの抽象クラス

2. **具体製品**

   - `WindowsButton`, `MacButton`: 各 OS スタイルのボタン
   - `WindowsCheckbox`, `MacCheckbox`: 各 OS スタイルのチェックボックス

3. **抽象ファクトリー**

   - `GUIFactory`: GUI コンポーネントを生成する抽象クラス

4. **具体ファクトリー**
   - `WindowsFactory`: Windows スタイルのコンポーネントを生成
   - `MacFactory`: Mac スタイルのコンポーネントを生成

## よくある質問（FAQ）

Q: **Factory Method パターンとの違いは？**

A: Factory Method パターンは単一のオブジェクトの生成に焦点を当てるのに対し、Abstract Factory パターンは関連する複数のオブジェクトのファミリーを生成します。

Q: **いつ Abstract Factory パターンを使用すべきか？**

A: 以下のような場合に使用することを推奨します：

- 関連するオブジェクトのファミリーを一貫性を持って生成する必要がある場合
- システムの設定や環境に応じて異なるオブジェクトファミリーを切り替える必要がある場合
- クライアントコードを具体的なクラスから分離したい場合

Q: **シンプルファクトリーとの違いは？**

A: シンプルファクトリーは単一のクラスでオブジェクトを生成しますが、Abstract Factory パターンは複数の関連するオブジェクトを生成するためのインターフェースを提供します。

Q: **デザインパターンの組み合わせは可能か？**

A: はい、Abstract Factory パターンは他のデザインパターンと組み合わせて使用できます。例えば：

- Singleton パターンと組み合わせてファクトリーをシングルトンにする
- Builder パターンと組み合わせて複雑なオブジェクトの生成を行う

Q: **DI (依存性注入) を使えば不要？**

A: 場合によります。例えば DI を使えば Factory の役割を IoC (Inversion of Control) に委ねられる。DI を使えない環境 (レガシーコード、組み込みシステム) では Abstract Factory が有効！
