# Abstract Factory パターン

## アブストラクトファクトリパターンとは

Abstract Factory パターンは、関連する一連のオブジェクトを一貫性を持って生成するためのデザインパターンです。このパターンでは、具体的なクラスを指定することなく、関連するオブジェクトのファミリーを作成するためのインターフェースを提供します。

## 目的

- 関連するオブジェクトのファミリーを一貫性を持って生成する
- クライアントコードを具体的なクラスから分離する
- システムの設定や環境に応じて、異なるオブジェクトファミリーを切り替える

## メリット・デメリット

### メリット

1. **一貫性の保証**

   - 関連するオブジェクトが常に一貫性を持って生成される
   - 互換性のないオブジェクトの組み合わせを防ぐ

2. **疎結合**

   - クライアントコードが具体的なクラスに依存しない
   - 新しいオブジェクトファミリーの追加が容易

3. **保守性**
   - オブジェクトの生成ロジックが一箇所に集中
   - 変更が必要な場合、影響範囲が限定的

### デメリット

1. **複雑性**

   - パターンの実装が複雑になる
   - クラスの数が増える

2. **拡張性**

   - 新しい種類のオブジェクトを追加する際に、既存のコードの修正が必要

3. **オーバーヘッド**
   - シンプルなオブジェクト生成には過剰な場合がある

## 主なユースケース

1. **GUI コンポーネント**

   - 異なる OS やテーマに応じた UI コンポーネントの生成
   - 一貫性のあるデザインの保証

2. **データベースアクセス**

   - 異なるデータベースシステムへの接続
   - データベース固有のオブジェクトの生成

3. **ドキュメント生成**
   - 異なるフォーマット（PDF, Word, HTML 等）のドキュメント生成
   - フォーマット固有のコンポーネントの生成

## 実装例の説明

このプロジェクトでは、GUI コンポーネントの生成を例として実装しています：

1. **抽象製品**

   - `Button`: ボタンの抽象クラス
   - `Checkbox`: チェックボックスの抽象クラス

2. **具体製品**

   - `WindowsButton`, `MacButton`: 各 OS スタイルのボタン
   - `WindowsCheckbox`, `MacCheckbox`: 各 OS スタイルのチェックボックス

3. **抽象ファクトリー**

   - `GUIFactory`: GUI コンポーネントを生成する抽象クラス

4. **具体ファクトリー**
   - `WindowsFactory`: Windows スタイルのコンポーネントを生成
   - `MacFactory`: Mac スタイルのコンポーネントを生成

## よくある質問（FAQ）

Q: **Factory Method パターンとの違いは？**
A: Factory Method パターンは単一のオブジェクトの生成に焦点を当てるのに対し、Abstract Factory パターンは関連する複数のオブジェクトのファミリーを生成します。

Q: **いつ Abstract Factory パターンを使用すべきか？**
A: 以下のような場合に使用することを推奨します：

- 関連するオブジェクトのファミリーを一貫性を持って生成する必要がある場合
- システムの設定や環境に応じて異なるオブジェクトファミリーを切り替える必要がある場合
- クライアントコードを具体的なクラスから分離したい場合

Q: **シンプルファクトリーとの違いは？**
A: シンプルファクトリーは単一のクラスでオブジェクトを生成しますが、Abstract Factory パターンは複数の関連するオブジェクトを生成するためのインターフェースを提供します。

Q: **デザインパターンの組み合わせは可能か？**
A: はい、Abstract Factory パターンは他のデザインパターンと組み合わせて使用できます。例えば：

- Singleton パターンと組み合わせてファクトリーをシングルトンにする
- Builder パターンと組み合わせて複雑なオブジェクトの生成を行う
