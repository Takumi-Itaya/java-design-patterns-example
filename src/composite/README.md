# Composite パターン

## Composite パターンとは

Composite パターンは、オブジェクトをツリー構造で表現し、個別のオブジェクトとオブジェクトの合成を同じように扱えるようにするデザインパターンです。これにより、クライアントは個別のオブジェクトと合成オブジェクトを区別することなく扱うことができます。

## 目的

- 再帰的な構造を作成し、ツリーのようにオブジェクトを管理
- 個々のオブジェクトと、それらをまとめたオブジェクトを統一的に扱う
- クライアントが、単体かグループかを意識せずに操作できるようにする

## メリット・デメリット

### メリット

- 個々のオブジェクトとグループを統一的に扱える
- 再帰的なツリー構造を簡単に実現できる
- オブジェクトの追加・削除が容易で、拡張性の向上

### デメリット

- ツリー構造が複雑になりすぎる可能性がある
- 全てのノードに共通インターフェースを実装する必要があり、不要なメソッドが増える可能性
- 特別な操作が必要な場合、型チェックが必要になる

## 主なユースケース

1. **ファイルシステム**

   - ファイルとディレクトリの階層構造
   - 例：Windows のエクスプローラー、フォルダの中にフォルダがあり、さらにファイルが入っている 階層構造

2. **GUI コンポーネント**

   - ウィンドウ、パネル、ボタンなどの階層構造
   - 例：Java Swing のコンポーネント、ウィンドウの中にパネル、さらにボタンが配置されている ような構造

3. **メニュー構造**

   - メニュー項目とサブメニューの階層構造
   - 例：アプリケーションのメインメニュー

4. **組織構造**

   - 従業員と部門の階層構造
   - 例：会社 → 部署 → チーム → 従業員 という階層構造

## 実装例の説明

このサンプルコードでは、以下のような構造で Composite パターンを実装しています：

1. **Component（FileSystemComponent）**

   - ファイルシステムの基本インターフェース
   - 共通の操作（print, getSize）を定義

2. **Leaf（File）**

   - 個別のファイルを表すクラス
   - サイズ情報を持つ

3. **Composite（Directory）**
   - ディレクトリを表すクラス
   - 子コンポーネントの管理と操作を提供

## よくある質問（FAQ）

### Q: Composite パターンと Decorator パターンの違いは何ですか？

A: Composite パターンはオブジェクトの階層構造を表現することを目的とし、Decorator パターンはオブジェクトに動的に機能を追加することを目的とします。

### Q: Composite パターンはいつ使用すべきですか？

A: 以下のような場合に使用すべきです：

- オブジェクトをツリー構造で表現する必要がある場合
- 個別のオブジェクトと合成オブジェクトを同じように扱いたい場合
- クライアントコードをシンプルにしたい場合

### Q: Composite パターンの実装コストは高いですか？

A: 初期の設計と実装には若干のコストがかかりますが、長期的な保守性と拡張性の向上により、そのコストは十分に回収できます。特に、システムの規模が大きくなるほど、そのメリットは顕著になります。
