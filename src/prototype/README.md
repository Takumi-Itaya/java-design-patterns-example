# Prototype パターン

## Prototype パターンとは

Prototype パターンは、オブジェクトのコピーを作成するためのデザインパターンです。新しいオブジェクトを生成する際に、既存のオブジェクトをプロトタイプとして使用し、そのコピーを作成します。

## 目的

オブジェクトを新しく作成するのではなく、既存のオブジェクトをコピー（クローン）して新しいインスタンスを作成すること

## メリット・デメリット

**メリット**

- オブジェクトの生成コストを削減できる
- 複雑なオブジェクトの初期化を回避
- オブジェクトのカスタマイズが容易
- サブクラスを作らずにオブジェクトを変更可能

**デメリット**

- 深いコピー（Deep Copy）が必要な場合は、実装が複雑になる
- コピー後に多くのフィールドを変更する場合、使いにくい

## 主なユースケース

1. **オブジェクトの生成コストを抑える**

   大量のオブジェクトを作成する際、元となるオブジェクトをコピーして作成

2. **設定済みオブジェクトの複製**

   初期設定が複雑なオブジェクトを、すでに設定済みのものからコピー

3. **プロトタイプの設定**

   ある基本オブジェクトをコピーし、特定のオプションだけ変更

4. \*キャッシュされたデータの利用\*\*

   データベースアクセスを減らすために、キャッシュされたオブジェクトを複製

## 実装例の説明

このサンプルコードでは、`Document`クラスをプロトタイプとして実装しています。

1. `Prototype`インターフェース

   - `clone()`メソッドを定義し、オブジェクトのコピーを作成するための契約を定めます

2. `Document`クラス

   - `Prototype`インターフェースを実装
   - タイトルと内容を持つドキュメントを表現
   - `clone()`メソッドで新しい`Document`インスタンスを作成

3. 使用例
   - オリジナルのドキュメントを作成
   - `clone()`メソッドを使用してコピーを作成
   - コピーしたドキュメントの内容を変更可能

## よくある質問（FAQ）

### Q1: シャローコピーとディープコピーの違いは？

A1: シャローコピーは参照のみをコピーし、ディープコピーはオブジェクトの内容も含めて完全にコピーします。

### Q2: いつ Prototype パターンを使用すべきですか？

A2: オブジェクトの生成コストが高い場合や、同じようなオブジェクトを多数生成する必要がある場合に使用します。

### Q3: クローン作成時に注意すべき点は？

A3: 循環参照や複雑なオブジェクト構造を持つ場合、適切なクローン戦略（シャローコピー vs ディープコピー）を選択する必要があります。

### Q4: Java の Cloneable インターフェースは必須？

A4: 推奨されが、必須ではない。ただ、`Cloneable`を実装しないと、`clone()`読んだとき`CloneNotSupportedException`が発生する
