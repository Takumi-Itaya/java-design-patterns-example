# Template Methodパターン

## Template Methodパターンとは
Template Methodパターンは、アルゴリズムの骨組みを定義し、その一部のステップをサブクラスで実装するデザインパターンです。アルゴリズムの構造は固定したまま、特定のステップをサブクラスでカスタマイズすることができます。

## 目的
- アルゴリズムの骨組みを定義する
- アルゴリズムの一部のステップをサブクラスで実装する
- コードの重複を減らす
- アルゴリズムの拡張性を高める
- 「変更しにくい部分」と「変更しやすい部分」を明確に分離する

## メリット・デメリット

### メリット
- コードの重複を減らせる
- アルゴリズムの構造を統一できる
- サブクラスで特定のステップをカスタマイズできる
- アルゴリズムの拡張性が向上する

### デメリット
- テンプレートメソッドの変更が困難
- サブクラスの数が増加する可能性がある
- テンプレートメソッドの変更が難しい（親クラスの変更が影響を与える）

## 主なユースケース（具体的に）

1. **飲料の準備**
   - コーヒー、紅茶、ジュースなどの準備手順
   - 共通の手順と個別の手順の分離

2. **ドキュメント生成**
   - PDF、Word、HTMLなどのドキュメント生成
   - 共通のフォーマットと個別のスタイル

3. **データベース操作**
   - 接続、クエリ実行、結果処理などの手順
   - 共通の処理と個別の実装

4. **ビルドプロセス**
   - コンパイル、テスト、デプロイなどの手順
   - 共通の手順と環境固有の設定

5. **フレームワークのライフサイクル管理**
   - Spring フレームワークの init() → execute() → destroy() など

## 実装例の説明
このサンプルコードでは、以下のような構造でTemplate Methodパターンを実装しています：

1. **AbstractClass（抽象クラス）**
   - アルゴリズムの骨組みを定義
   - Beverage抽象クラス

2. **ConcreteClass（具象クラス）**
   - 特定のステップを実装
   - Coffee、Teaクラス

3. **Template Method（テンプレートメソッド）**
   - アルゴリズムの骨組みを定義するメソッド
   - prepare()メソッド

4. **Primitive Operation（基本操作）**
   - サブクラスで実装する抽象メソッド
   - brew()、addCondiments()メソッド

5. **Hook Method（フックメソッド）**
   - オプションのカスタマイズポイント
   - customerWantsCondiments()メソッド

## よくある質問（FAQ）

### Q: Template MethodパターンとStrategyパターンの違いは何ですか？
A: Template Methodパターンはアルゴリズムの骨組みを固定し、一部のステップをカスタマイズするのに対し、Strategyパターンはアルゴリズム全体を切り替えます。

### Q: Template Methodパターンはいつ使用すべきですか？
A: 以下のような場合に使用すべきです：
- 複数のクラスで共通のアルゴリズムを使用する場合
- アルゴリズムの一部をカスタマイズする必要がある場合
- コードの重複を減らしたい場合

### Q: Template Methodパターンの実装コストは高いですか？
A: 初期の設計に時間がかかる可能性がありますが、コードの重複を減らし、保守性を向上させることで、長期的にはコストを回収できる場合があります。

### Q: フレームワークでの活用例は？
 - Spring Framework → AbstractApplicationContext クラス（refresh() メソッドがテンプレートメソッド）
 - JUnit → setUp() や tearDown() メソッド（テスト実行の前後の処理）
 - Servlet API → GenericServlet.service() メソッド