# Proxy パターン

## Proxy パターンとは

Proxy パターンは、オブジェクトへのアクセスを制御するためのデザインパターンです。実際のオブジェクトの代わりにプロキシオブジェクトを使用することで、アクセス制御や遅延ロードなどの機能を実現します。

## 目的

- アクセス制御: 特定の条件でのみオブジェクトにアクセスさせる
- リソース管理: オブジェクトの生成や使用を最適化（遅延ロード・キャッシュ）
- セキュリティ管理: 認証・認可などのチェックを追加
- リモートアクセス: ネットワーク越しのオブジェクト操作を簡単にする（分散システム）

## メリット・デメリット

### メリット

- オブジェクトの生成を遅延できる
- アクセス制御が可能
- クライアントコードを変更せずに機能を追加できる

### デメリット

- システムの複雑さが増加する
- レスポンス時間が遅くなる可能性がある
- デバッグが困難になる可能性がある

## 主なユースケース（具体的に）

1. **仮想プロキシ（Virtual Proxy）**

   - 画像やデータを遅延ロードし、不要なリソース消費を防ぐ

2. **保護プロキシ（Protection Proxy）**

   - データベース接続、ファイルシステムなどのユーザーの認証・認可をチェックして、アクセス制限をかける

3. **キャッシュプロキシ（Cache Proxy）**

   - 例：Web ページ、データベースクエリ、データベース、API の結果をキャッシュしてパフォーマンスを向上

4. **リモートプロキシ（Remote Proxy）**

   - ネットワーク越しにオブジェクトを操作（RMI、gRPC など）

5. **スマートプロキシ（Smart Proxy）**

   - 追加のロギングやリソース管理を行う

## 実装例の説明

このサンプルコードでは、以下のような構造で Proxy パターンを実装しています：

1. **Subject（Image）**

   - 画像の基本インターフェース
   - 共通の操作（display）を定義

2. **RealSubject（RealImage）**

   - 実際の画像クラス
   - 重い処理（画像のロード）を実装

3. **Proxy（ImageProxy）**
   - 画像へのアクセスを制御
   - 遅延ロードを実現

## よくある質問（FAQ）

### Q: Proxy パターンと Decorator パターンの違いは何ですか？

A: Proxy パターンはオブジェクトへのアクセスを制御することを目的とし、Decorator パターンはオブジェクトに動的に機能を追加することを目的とします。

### Q: Proxy パターンはいつ使用すべきですか？

A: 以下のような場合に使用すべきです：

- オブジェクトの生成を遅延させたい場合
- オブジェクトへのアクセスを制御したい場合
- オブジェクトへのアクセスに追加の機能が必要な場合

### Q: Proxy パターンの実装コストは高いですか？

A: 初期の設計と実装には若干のコストがかかりますが、システムの柔軟性と保守性の向上により、そのコストは十分に回収できます。特に、システムの規模が大きくなるほど、そのメリットは顕著になります。
